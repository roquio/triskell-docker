##=============================================================================
## Nuxeo configuration file
##=============================================================================
## See https://doc.nuxeo.com/x/PwA7 and https://doc.nuxeo.com/x/QQA7
## for detailed information about the settings below.

##-----------------------------------------------------------------------------
## Java
##-----------------------------------------------------------------------------
#
# Specify the location of the Java home directory.  If set then $JAVA will
# be defined to $JAVA_HOME/bin/java, else $JAVA will be "java".
#
JAVA_HOME=/usr/local/openjdk-8

## Heap size
JAVA_OPTS=-Xms512m -Xmx1024m -XX:MaxPermSize=512m -server

## File encoding and encoded MIME parameters support
JAVA_OPTS=$JAVA_OPTS -Dfile.encoding=UTF-8 -Dmail.mime.decodeparameters=true

## Update sort behavior for Arrays and Collections may throw an IllegalArgumentException
JAVA_OPTS=$JAVA_OPTS -Djava.util.Arrays.useLegacyMergeSort=true

## Log Garbage Collector informations into a file
JAVA_OPTS=$JAVA_OPTS -Xloggc:"${nuxeo.log.dir}/gc.log" -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps

##-----------------------------------------------------------------------------
## Nuxeo launcher
##-----------------------------------------------------------------------------
#launcher.start.max.wait=300
#launcher.stop.max.wait=60
#launcher.override.java.tmpdir=true

##-----------------------------------------------------------------------------
## Nuxeo filesystem paths
## ----------------------------------------------------------------------------
## Relative paths will be anchored at NUXEO_HOME; the following
##  are not default values but recommended values
nuxeo.log.dir=/var/log/nuxeo
#nuxeo.pid.dir=/var/run
nuxeo.data.dir=/data/nuxeo
#nuxeo.tmp.dir=/tmp

nuxeo.force.generation=true

##-----------------------------------------------------------------------------
## General parameters
##-----------------------------------------------------------------------------
## Will regenerate config from these parameters each time the server
##  is restarted
nuxeo.force.generation=true
#nuxeo.templates=default
#nuxeo.bind.address=0.0.0.0
#org.nuxeo.ecm.contextPath=/nuxeo
org.nuxeo.ecm.product.name=TRISKELL Platform, powered by Nuxeo
org.nuxeo.ecm.product.version=1.0
nuxeo.url=http://PUBLIC_HOST/nuxeo
nuxeo.server.http.port=8080
nuxeo.loopback.url=http://localhost:8080/nuxeo
nuxeo.server.tomcat_admin.port=8011
nuxeo.server.ajp.port=0
org.nuxeo.ecm.contextPath=/nuxeo

##-----------------------------------------------------------------------------
## Database configuration
##-----------------------------------------------------------------------------
nuxeo.db.name=nuxeodb
nuxeo.db.user=nuxeo
nuxeo.db.password=password
nuxeo.db.host=postgres
#nuxeo.db.port=
#nuxeo.db.jdbc.url=
#nuxeo.db.driver=
## Pools
#nuxeo.db.min-pool-size=
#nuxeo.db.max-pool-size=
#nuxeo.vcs.min-pool-size=
#nuxeo.vcs.max-pool-size=
## Database transaction timeout in seconds (tomcat only)
#nuxeo.db.transactiontimeout=300

##-----------------------------------------------------------------------------
## Elasticsearch configuration
##-----------------------------------------------------------------------------
# Elasticsearch
elasticsearch.enabled=true
# Name of the Elasticsearch index for the default document repository
elasticsearch.indexName=nuxeo
# Comma separated list of Elasticsearch nodes, if empty use a local in JVM node
elasticsearch.addressList=elasticsearch:9300
# Name of the Elasticsearch cluster to join
elasticsearch.clusterName=es-cluster


## Disable ACLs optimization:
nuxeo.vcs.optimizations.acl.enabled=false

##========================
## Fulltext Analyzer
##========================
nuxeo.vcs.fulltext.search.analyzer=french


##-----------------------------------------------------------------------------
## Nuxeo Dev Mode
##-----------------------------------------------------------------------------
## Enable this mode if you'd like to benefit from hot reload features
##  useful for development. Setting this property to true will:
## - set the JSF facelets refresh period to 2s, enabling to check for
##   changes on JSF files
## - make it possible to hot-reload Studio jars from the admin center
## - reset different levels of caches when hot-reloading a Studio jar,
##   or when triggering the "Dev Mode > Force flush" action available
##   in user menu to administrators of the application
## The dev mode is disabled by default (not suitable for production)
##  and can also be activated from the Admin Center.
org.nuxeo.dev=true

##-----------------------------------------------------------------------------
## Nuxeo REST API
## -----------------------------------------------------------------------------
## Enable StackTrace display in JSON payload response in case of
## exception. By default there is no stacktrace displayed, only simple
## exception details.
#org.nuxeo.rest.stack.enable=true

##-----------------------------------------------------------------------------
## Nuxeo Automation Trace
##-----------------------------------------------------------------------------
## Enable this mode if you'd like to display automation traces during
##  runtime.  You'll benefit from exhaustive logs to debug all
##  automation chain and/or operation execution.
## The automation trace mode is disabled by default (not suitable for
##  production) and can also be activated through JMX via
##  org.nuxeo.automation:TracerFactory MBean during runtime.
#org.nuxeo.automation.trace=true

## By default, all automation executions are 'printable' (appear in
##  logs). You can filter chain and/or operation execution trace
##  printing by setting this property to chain name and/or operation
##  separated by comma. Comment it to get all back.
#org.nuxeo.automation.trace.printable=chainIdA,ChainIdB

##-----------------------------------------------------------------------------
## Debugging options
##-----------------------------------------------------------------------------

## Sample JPDA settings for remote socket debugging
JAVA_OPTS=$JAVA_OPTS -Xdebug -Xrunjdwp:transport=dt_socket,address=8788,server=y,suspend=n

## Sample JPDA settings for shared memory debugging
#JAVA_OPTS=$JAVA_OPTS -Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_shmem,server=y,suspend=n,address=jboss

## Enable jconsole
#JAVA_OPTS=$JAVA_OPTS -Dcom.sun.management.jmxremote=true

## Enable JMX
#JAVA_OPTS=$JAVA_OPTS -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=1089 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false

## Disable soft references
#JAVA_OPTS=$JAVA_OPTS -XX:SoftRefLRUPolicyMSPerMB=0

## Mission control fligth recorder
#JAVA_OPTS=$JAVA_OPTS -Dcom.sun.management.jmxremote.autodiscovery=true -Dcom.sun.management.jdp.name=Nuxeo -XX:+UnlockCommercialFeatures -XX:+FlightRecorder
nuxeo.wizard.done=true
nuxeo.templates=postgresql
